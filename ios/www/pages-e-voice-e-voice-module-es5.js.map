{"version":3,"sources":["src/app/pages/e-voice/e-voice.page.html","src/app/pages/e-voice/e-voice.module.ts","src/app/pages/e-voice/e-voice.page.scss","src/app/pages/e-voice/e-voice.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-back-button></ion-back-button>\\n      </ion-buttons>\\n      <ion-title>Talk about your food</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  \\n  <ion-content>\\n  \\n      <!-- <ion-item>\\n          <ion-label position=\\\"floating\\\">Recognized Text</ion-label>\\n          <ion-textarea></ion-textarea>\\n        </ion-item>\\n    <ion-button expand='full'>Start Recording</ion-button>\\n    <ion-button expand='full'>Save</ion-button> -->\\n\\n    <ion-grid style=\\\"height: 100%; display: flex; flex-flow: column;\\\">\\n      <ion-row style=\\\"flex-grow: 1;\\\">\\n\\n        <ion-col size=\\\"12\\\" *ngIf=\\\"result != ''\\\">\\n          <ion-item lines=\\\"none\\\">\\n            <ion-label position=\\\"floating\\\">Recognized Text</ion-label>\\n            <ion-textarea [(ngModel)]='result'></ion-textarea>\\n          </ion-item>\\n        </ion-col>\\n\\n        <ion-col size=\\\"12\\\" *ngIf=\\\"result === ''\\\">\\n          <ion-item lines=\\\"none\\\">\\n            Press the red button to start recording\\n          </ion-item>\\n        </ion-col>\\n\\n      </ion-row>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-button expand=\\\"block\\\" class=\\\"ion-no-margin\\\" color='danger' (click)='onRecording()'>{{buttonText}}</ion-button>\\n        </ion-col>\\n        <ion-col size=\\\"12\\\">\\n          <ion-button expand=\\\"block\\\" class=\\\"ion-no-margin\\\" (click)='onSave()'>Save</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  \\n  </ion-content>\\n  \"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EVoicePage } from './e-voice.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EVoicePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [EVoicePage]\n})\nexport class EVoicePageModule {}\n","export default \"ion-toolbar {\\n  --background: rgb(242, 168, 70);\\n  color: white;\\n}\\nion-toolbar ion-back-button {\\n  color: white;\\n}\\nion-content {\\n  --background: rgb(246, 205, 96);\\n}\\nion-item {\\n  --background: rgb(246, 205, 96);\\n  --color: white;\\n}\\nion-button {\\n  --background: #009979;\\n}\\nion-textarea {\\n  height: 50vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXFpaHVhaS9Eb2N1bWVudHMvR2l0SHViL211bHRpbW9kYWwtZm9vZC1hcHBzL21vYmlsZSB2Mi9zcmMvYXBwL3BhZ2VzL2Utdm9pY2UvZS12b2ljZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2Utdm9pY2UvZS12b2ljZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFSSwrQkFBQTtFQUNBLFlBQUE7QUNBSjtBREVJO0VBQ0ksWUFBQTtBQ0FSO0FESUE7RUFFSSwrQkFBQTtBQ0ZKO0FES0E7RUFFSSwrQkFBQTtFQUNBLGNBQUE7QUNISjtBRE1BO0VBQ0kscUJBQUE7QUNISjtBRE1BO0VBQ0ksWUFBQTtBQ0hKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvZS12b2ljZS9lLXZvaWNlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi10b29sYmFyIHtcbiAgICAvLyAtLWJhY2tncm91bmQ6IHJnYigyNDYsIDIwNSwgOTYpO1xuICAgIC0tYmFja2dyb3VuZDogcmdiKDI0MiwgMTY4LCA3MCk7XG4gICAgY29sb3I6IHdoaXRlO1xuXG4gICAgaW9uLWJhY2stYnV0dG9uIHtcbiAgICAgICAgY29sb3I6d2hpdGU7XG4gICAgfVxufVxuXG5pb24tY29udGVudCB7XG4gICAgLy8gLS1iYWNrZ3JvdW5kOiByZ2IoMjQyLCAxNjgsIDcwKTtcbiAgICAtLWJhY2tncm91bmQ6IHJnYigyNDYsIDIwNSwgOTYpO1xufVxuXG5pb24taXRlbSB7XG4gICAgLy8gLS1iYWNrZ3JvdW5kOiByZ2IoMjQyLCAxNjgsIDcwKTtcbiAgICAtLWJhY2tncm91bmQ6IHJnYigyNDYsIDIwNSwgOTYpO1xuICAgIC0tY29sb3I6IHdoaXRlO1xufVxuXG5pb24tYnV0dG9uIHtcbiAgICAtLWJhY2tncm91bmQ6ICMwMDk5Nzk7XG59XG5cbmlvbi10ZXh0YXJlYSB7XG4gICAgaGVpZ2h0OiA1MHZoO1xufSIsImlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiByZ2IoMjQyLCAxNjgsIDcwKTtcbiAgY29sb3I6IHdoaXRlO1xufVxuaW9uLXRvb2xiYXIgaW9uLWJhY2stYnV0dG9uIHtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG5pb24tY29udGVudCB7XG4gIC0tYmFja2dyb3VuZDogcmdiKDI0NiwgMjA1LCA5Nik7XG59XG5cbmlvbi1pdGVtIHtcbiAgLS1iYWNrZ3JvdW5kOiByZ2IoMjQ2LCAyMDUsIDk2KTtcbiAgLS1jb2xvcjogd2hpdGU7XG59XG5cbmlvbi1idXR0b24ge1xuICAtLWJhY2tncm91bmQ6ICMwMDk5Nzk7XG59XG5cbmlvbi10ZXh0YXJlYSB7XG4gIGhlaWdodDogNTB2aDtcbn0iXX0= */\"","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { SpeechRecognition } from '@ionic-native/speech-recognition/ngx';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { LogService } from 'src/app/services/log.service';\n\n@Component({\n  selector: 'app-e-voice',\n  templateUrl: './e-voice.page.html',\n  styleUrls: ['./e-voice.page.scss'],\n})\nexport class EVoicePage implements OnInit {\n  matches: string[];\n  isRecording = false;\n  isAvailable = false;\n  result = '';\n  buttonText = 'Start Recording';\n  index = -1;\n\n  constructor(private speechRecognition: SpeechRecognition,\n              private router: Router,\n              private logService: LogService,\n              private changeDetectorRef: ChangeDetectorRef,\n              private route: ActivatedRoute) { }\n\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get(\"id\");\n    if (id !== null) {\n      this.index = parseInt(id, 10);\n      this.result = this.logService.data.entries[this.index]['entry'];\n    }\n    this.speechRecognition.hasPermission().then(permission => {\n      this.isAvailable = permission;\n      if (!permission) {\n        this.speechRecognition.requestPermission().then(\n          () => this.isAvailable = true,\n          () => this.isAvailable = false\n        );\n      }\n    });\n  }\n\n  onRecording() {\n    if (this.isAvailable) {\n      if (this.isRecording) {\n        // already recording\n        this.buttonText = 'Start Recording';\n        this.speechRecognition.stopListening();\n        this.isRecording = false;\n      } else {\n        // not recording\n        this.buttonText = 'Stop Recording';\n        this.speechRecognition.startListening({language: 'en-EN'}).subscribe(matches => {\n          this.matches = [];\n          matches.forEach(item => this.matches.push(item));\n          this.result = matches[0];\n          this.changeDetectorRef.detectChanges();\n        }, error => {\n        });\n        this.isRecording = true;\n      }\n    }\n  }\n\n  onSave() {\n    if(this.result === '') {\n      return;\n    }\n    if (this.index == -1) {\n      const p = new Map<string, string>();\n      p['modality'] = 'voice';\n      p['entry'] = this.result;\n      this.logService.addEntry(p);\n    } else {\n      this.logService.data.entries[this.index]['entry'] = this.result;\n    }\n    this.router.navigateByUrl('/entry');\n  }\n\n\n\n}\n"],"sourceRoot":"webpack:///","file":"pages-e-voice-e-voice-module-es5.js"}